<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ecotech ‚Äî CO‚ÇÇ Intelligence Platform</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg: #F5F3EE; --surface: #FFFEFB; --surface2: #EDEAE3; --border: #DDD9D0;
    --text: #1A1916; --text-muted: #7A7669; --accent: #2D5A27; --accent-light: #4A8C41;
    --accent-pale: #E8F0E7; --danger: #C0392B; --warn: #D4820A;
    --warn-pale: #FBF0DC; --danger-pale: #FAECEB; --chart-2: #8FBE8A; --chart-3: #C4DEC2;
  }
  html { font-size: 14px; }
  body { font-family: 'DM Sans', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; display: flex; }

  .sidebar { width: 220px; min-height: 100vh; background: var(--text); display: flex; flex-direction: column; padding: 28px 20px; position: fixed; left: 0; top: 0; bottom: 0; z-index: 100; overflow-y: auto; }
  .logo { display: flex; align-items: center; gap: 10px; margin-bottom: 40px; }
  .logo-icon { width: 32px; height: 32px; background: var(--accent-light); border-radius: 8px; display: grid; place-items: center; font-size: 16px; }
  .logo-text { font-family: 'DM Serif Display', serif; font-size: 1.4rem; color: #fff; letter-spacing: -0.03em; }
  .nav-label { font-size: 0.7rem; font-weight: 500; letter-spacing: 0.1em; text-transform: uppercase; color: #4A4840; margin-bottom: 8px; padding-left: 10px; }
  .nav-group { margin-bottom: 28px; }
  .nav-item { display: flex; align-items: center; gap: 10px; padding: 8px 10px; border-radius: 8px; color: #9A9890; font-size: 0.9rem; font-weight: 400; cursor: pointer; transition: all 0.15s; border: none; background: none; width: 100%; text-align: left; }
  .nav-item:hover { background: #252420; color: #fff; }
  .nav-item.active { background: var(--accent); color: #fff; }
  .nav-item .nav-icon { font-size: 15px; width: 18px; text-align: center; }
  .sidebar-footer { margin-top: auto; border-top: 1px solid #252420; padding-top: 20px; }
  .user-card { display: flex; align-items: center; gap: 10px; padding: 8px 10px; border-radius: 8px; cursor: pointer; transition: background 0.15s; }
  .user-card:hover { background: #252420; }
  .avatar { width: 32px; height: 32px; background: var(--accent); border-radius: 50%; display: grid; place-items: center; font-size: 0.75rem; font-weight: 600; color: #fff; flex-shrink: 0; }
  .user-name { color: #fff; font-size: 0.85rem; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .user-role { color: #4A4840; font-size: 0.75rem; }

  .main { margin-left: 220px; flex: 1; min-height: 100vh; display: flex; flex-direction: column; }
  .topbar { background: var(--surface); border-bottom: 1px solid var(--border); padding: 0 32px; height: 60px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 50; }
  .page-title { font-family: 'DM Serif Display', serif; font-size: 1.3rem; letter-spacing: -0.02em; }
  .topbar-actions { display: flex; align-items: center; gap: 12px; }

  .btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; border-radius: 8px; font-size: 0.85rem; font-weight: 500; cursor: pointer; transition: all 0.15s; border: none; font-family: 'DM Sans', sans-serif; }
  .btn-primary { background: var(--accent); color: #fff; }
  .btn-primary:hover { background: var(--accent-light); }
  .btn-outline { background: transparent; border: 1px solid var(--border); color: var(--text); }
  .btn-outline:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-pale); }
  .btn-ghost { background: transparent; color: var(--text-muted); }
  .btn-ghost:hover { background: var(--surface2); color: var(--text); }
  .btn-lg { padding: 12px 28px; font-size: 0.95rem; }

  .content { padding: 32px; flex: 1; }
  .page { display: none; }
  .page.active { display: block; animation: fadeIn 0.2s ease; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes slideDown { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }

  .alert-banner { background: var(--warn-pale); border: 1px solid #E8C06A; border-radius: 10px; padding: 12px 18px; display: flex; align-items: center; gap: 12px; margin-bottom: 28px; animation: slideDown 0.4s ease; }
  .alert-banner.hidden { display: none; }
  .alert-text { flex: 1; font-size: 0.88rem; color: #8A5A0A; }
  .alert-text strong { font-weight: 600; }

  .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 28px; }
  .stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 20px; transition: box-shadow 0.2s; }
  .stat-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,0.06); }
  .stat-label { font-size: 0.78rem; color: var(--text-muted); font-weight: 500; letter-spacing: 0.02em; text-transform: uppercase; margin-bottom: 10px; }
  .stat-value { font-family: 'DM Mono', monospace; font-size: 1.8rem; font-weight: 500; letter-spacing: -0.03em; margin-bottom: 8px; line-height: 1; }
  .stat-badge { display: inline-flex; align-items: center; gap: 4px; font-size: 0.78rem; font-weight: 500; padding: 3px 8px; border-radius: 20px; }
  .badge-down { background: var(--accent-pale); color: var(--accent); }
  .badge-up { background: var(--danger-pale); color: var(--danger); }
  .stat-sub { font-size: 0.78rem; color: var(--text-muted); margin-top: 4px; }

  .charts-row { display: grid; grid-template-columns: 2fr 1fr; gap: 16px; margin-bottom: 28px; }
  .card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 24px; }
  .card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
  .card-title { font-weight: 600; font-size: 0.95rem; }
  .card-subtitle { font-size: 0.78rem; color: var(--text-muted); margin-top: 2px; }

  .bar-chart { display: flex; align-items: flex-end; gap: 8px; height: 160px; }
  .bar-col { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 6px; height: 100%; justify-content: flex-end; cursor: pointer; position: relative; }
  .bar { width: 100%; border-radius: 4px 4px 0 0; transition: opacity 0.15s, transform 0.15s; }
  .bar-col:hover .bar { opacity: 0.8; transform: scaleY(1.03); transform-origin: bottom; }
  .bar-main { background: var(--accent); }
  .bar-prev { background: var(--chart-3); }
  .bar-label { font-family: 'DM Mono', monospace; font-size: 0.7rem; color: var(--text-muted); }
  .chart-legend { display: flex; gap: 16px; margin-top: 16px; }
  .legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.78rem; color: var(--text-muted); }
  .legend-dot { width: 8px; height: 8px; border-radius: 2px; }
  .bar-tooltip { display: none; position: absolute; bottom: calc(100% + 8px); left: 50%; transform: translateX(-50%); background: var(--text); color: #fff; font-size: 0.75rem; padding: 5px 10px; border-radius: 6px; white-space: nowrap; pointer-events: none; font-family: 'DM Mono', monospace; z-index: 10; }
  .bar-col:hover .bar-tooltip { display: block; }

  .donut-wrap { display: flex; flex-direction: column; align-items: center; }
  .scope-list { width: 100%; }
  .scope-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border); }
  .scope-item:last-child { border-bottom: none; }
  .scope-left { display: flex; align-items: center; gap: 10px; }
  .scope-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
  .scope-pct { font-family: 'DM Mono', monospace; font-size: 0.82rem; color: var(--text-muted); }

  .table-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
  .table-header { padding: 18px 24px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border); }
  .search-box { display: flex; align-items: center; gap: 8px; background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 7px 12px; font-size: 0.85rem; width: 220px; transition: border-color 0.15s; }
  .search-box:focus-within { border-color: var(--accent); }
  .search-box input { border: none; background: transparent; outline: none; font-family: 'DM Sans', sans-serif; font-size: 0.85rem; color: var(--text); width: 100%; }
  .search-box input::placeholder { color: var(--text-muted); }
  table { width: 100%; border-collapse: collapse; }
  thead th { text-align: left; padding: 10px 24px; font-size: 0.72rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); background: var(--bg); border-bottom: 1px solid var(--border); cursor: pointer; user-select: none; }
  thead th:hover { color: var(--text); }
  tbody tr { border-bottom: 1px solid var(--border); transition: background 0.1s; cursor: pointer; }
  tbody tr:last-child { border-bottom: none; }
  tbody tr:hover { background: var(--bg); }
  td { padding: 14px 24px; font-size: 0.88rem; }
  td:nth-child(3), td:nth-child(4) { font-family: 'DM Mono', monospace; }

  .status-pill { display: inline-flex; align-items: center; gap: 5px; padding: 3px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 500; }
  .status-on-track { background: var(--accent-pale); color: var(--accent); }
  .status-at-risk { background: var(--warn-pale); color: var(--warn); }
  .status-over { background: var(--danger-pale); color: var(--danger); }
  .progress-bar-wrap { display: flex; align-items: center; gap: 10px; }
  .progress-track { flex: 1; height: 4px; background: var(--surface2); border-radius: 2px; overflow: hidden; }
  .progress-fill { height: 100%; border-radius: 2px; }
  .fill-green { background: var(--accent); }
  .fill-warn { background: var(--warn); }
  .fill-danger { background: var(--danger); }
  .progress-pct { font-family: 'DM Mono', monospace; font-size: 0.75rem; color: var(--text-muted); width: 32px; text-align: right; }

  .tabs { display: flex; gap: 2px; background: var(--surface2); border-radius: 8px; padding: 3px; }
  .tab { padding: 5px 14px; border-radius: 6px; font-size: 0.82rem; font-weight: 500; cursor: pointer; border: none; background: transparent; color: var(--text-muted); transition: all 0.15s; font-family: 'DM Sans', sans-serif; }
  .tab.active { background: var(--surface); color: var(--text); box-shadow: 0 1px 4px rgba(0,0,0,0.08); }
  .tab:hover:not(.active) { color: var(--text); }

  .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(26,25,22,0.5); z-index: 200; place-items: center; backdrop-filter: blur(3px); }
  .modal-overlay.open { display: grid; }
  .modal { background: var(--surface); border-radius: 16px; padding: 32px; width: 480px; max-width: 90vw; animation: modalIn 0.2s ease; border: 1px solid var(--border); }
  @keyframes modalIn { from { opacity: 0; transform: scale(0.95) translateY(8px); } to { opacity: 1; transform: scale(1) translateY(0); } }
  .modal-title { font-family: 'DM Serif Display', serif; font-size: 1.4rem; margin-bottom: 6px; }
  .modal-sub { color: var(--text-muted); font-size: 0.88rem; margin-bottom: 24px; }
  .form-group { margin-bottom: 16px; }
  .form-label { font-size: 0.82rem; font-weight: 500; margin-bottom: 6px; display: block; }
  .form-input { width: 100%; border: 1px solid var(--border); border-radius: 8px; padding: 9px 12px; font-size: 0.88rem; font-family: 'DM Sans', sans-serif; outline: none; background: var(--bg); color: var(--text); transition: border-color 0.15s; }
  .form-input:focus { border-color: var(--accent); }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .modal-footer { display: flex; justify-content: flex-end; gap: 10px; margin-top: 24px; }
  select.form-input { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%237A7669' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; background-color: var(--bg); padding-right: 36px; }

  .toast { position: fixed; bottom: 24px; right: 24px; background: var(--text); color: #fff; padding: 12px 20px; border-radius: 10px; font-size: 0.88rem; display: flex; align-items: center; gap: 10px; z-index: 999; opacity: 0; transform: translateY(12px); transition: all 0.3s ease; pointer-events: none; }
  .toast.show { opacity: 1; transform: translateY(0); }

  /* ‚îÄ‚îÄ ANALYTICS ‚îÄ‚îÄ */
  .section-title { font-family: 'DM Serif Display', serif; font-size: 1.15rem; letter-spacing: -0.02em; margin-bottom: 4px; }
  .section-sub { font-size: 0.82rem; color: var(--text-muted); margin-bottom: 20px; }
  .analytics-summary { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 28px; }
  .plant-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
  .plant-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; transition: box-shadow 0.2s, border-color 0.2s; }
  .plant-card.expanded { border-color: var(--accent); box-shadow: 0 6px 24px rgba(45,90,39,0.12); }
  .plant-header { padding: 18px 20px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; transition: background 0.15s; }
  .plant-header:hover { background: var(--bg); }
  .plant-meta { display: flex; align-items: center; gap: 12px; }
  .plant-icon { width: 36px; height: 36px; border-radius: 8px; display: grid; place-items: center; font-size: 18px; background: var(--accent-pale); flex-shrink: 0; }
  .plant-name { font-weight: 600; font-size: 0.95rem; }
  .plant-loc { font-size: 0.75rem; color: var(--text-muted); margin-top: 2px; }
  .plant-total { text-align: right; }
  .plant-co2 { font-family: 'DM Mono', monospace; font-size: 1.1rem; font-weight: 500; }
  .plant-co2-label { font-size: 0.72rem; color: var(--text-muted); }
  .plant-expand-icon { transition: transform 0.25s; color: var(--text-muted); font-size: 0.8rem; margin-left: 10px; }
  .plant-card.expanded .plant-expand-icon { transform: rotate(180deg); }
  .plant-lines { display: none; border-top: 1px solid var(--border); background: var(--bg); }
  .plant-card.expanded .plant-lines { display: block; animation: fadeIn 0.2s ease; }
  .plant-lines-header { padding: 10px 20px; display: grid; grid-template-columns: 1fr 100px 90px 100px; gap: 8px; font-size: 0.72rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); border-bottom: 1px solid var(--border); background: var(--surface2); }
  .prod-line { padding: 11px 20px; display: grid; grid-template-columns: 1fr 100px 90px 100px; gap: 8px; align-items: center; border-bottom: 1px solid var(--border); transition: background 0.1s; }
  .prod-line:last-child { border-bottom: none; }
  .prod-line:hover { background: var(--surface); }
  .prod-line-name { font-size: 0.85rem; font-weight: 500; }
  .prod-line-type { font-size: 0.73rem; color: var(--text-muted); margin-top: 1px; }
  .prod-line-co2 { font-family: 'DM Mono', monospace; font-size: 0.85rem; }
  .prod-change-up { font-family: 'DM Mono', monospace; font-size: 0.78rem; color: var(--danger); }
  .prod-change-down { font-family: 'DM Mono', monospace; font-size: 0.78rem; color: var(--accent); }

  /* ‚îÄ‚îÄ REPORTS ‚îÄ‚îÄ */
  .report-builder { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 32px; max-width: 660px; margin-bottom: 28px; }
  .report-type-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 24px; }
  .report-type-card { border: 2px solid var(--border); border-radius: 10px; padding: 18px 14px; cursor: pointer; transition: all 0.15s; text-align: center; background: var(--bg); }
  .report-type-card:hover { border-color: var(--accent); background: var(--accent-pale); }
  .report-type-card.selected { border-color: var(--accent); background: var(--accent-pale); }
  .report-type-icon { font-size: 26px; margin-bottom: 8px; }
  .report-type-name { font-weight: 600; font-size: 0.9rem; }
  .report-type-desc { font-size: 0.75rem; color: var(--text-muted); margin-top: 3px; }
  .report-history { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
  .report-history-header { padding: 16px 24px; border-bottom: 1px solid var(--border); font-weight: 600; font-size: 0.9rem; }
  .report-row { display: flex; align-items: center; padding: 14px 24px; border-bottom: 1px solid var(--border); gap: 14px; transition: background 0.1s; }
  .report-row:last-child { border-bottom: none; }
  .report-row:hover { background: var(--bg); }
  .report-row-icon { width: 34px; height: 34px; background: var(--accent-pale); border-radius: 8px; display: grid; place-items: center; font-size: 16px; flex-shrink: 0; }
  .report-row-name { font-size: 0.88rem; font-weight: 500; }
  .report-row-meta { font-size: 0.75rem; color: var(--text-muted); margin-top: 2px; }
  .report-row-size { font-family: 'DM Mono', monospace; font-size: 0.78rem; color: var(--text-muted); margin-left: auto; }

  /* ‚îÄ‚îÄ IMPORT ‚îÄ‚îÄ */
  .import-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px; }
  .drop-zone { border: 2px dashed var(--border); border-radius: 12px; padding: 48px 32px; text-align: center; cursor: pointer; transition: all 0.2s; background: var(--surface); }
  .drop-zone:hover, .drop-zone.dragover { border-color: var(--accent); background: var(--accent-pale); }
  .drop-zone-icon { font-size: 36px; margin-bottom: 12px; }
  .drop-zone-title { font-weight: 600; font-size: 1rem; margin-bottom: 6px; }
  .drop-zone-sub { font-size: 0.82rem; color: var(--text-muted); margin-bottom: 16px; }
  .drop-zone-formats { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
  .format-tag { background: var(--surface2); border-radius: 4px; padding: 3px 8px; font-size: 0.72rem; font-family: 'DM Mono', monospace; color: var(--text-muted); }
  .import-side { display: flex; flex-direction: column; gap: 12px; }
  .import-side-label { font-size: 0.78rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); }
  .import-option { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 14px 16px; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; gap: 12px; }
  .import-option:hover { border-color: var(--accent); background: var(--accent-pale); }
  .import-option-icon { font-size: 20px; width: 38px; height: 38px; background: var(--bg); border-radius: 8px; display: grid; place-items: center; flex-shrink: 0; }
  .import-option-name { font-weight: 600; font-size: 0.88rem; }
  .import-option-desc { font-size: 0.75rem; color: var(--text-muted); margin-top: 1px; }
  .import-arrow { margin-left: auto; color: var(--text-muted); font-size: 0.85rem; }
  .upload-progress { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 14px 16px; margin-top: 12px; display: none; }
  .upload-progress.visible { display: block; animation: fadeIn 0.2s ease; }
  .upload-progress-label { font-size: 0.82rem; display: flex; justify-content: space-between; margin-bottom: 6px; }
  .upload-bar-track { height: 6px; background: var(--surface2); border-radius: 3px; overflow: hidden; margin-bottom: 6px; }
  .upload-bar-fill { height: 100%; background: var(--accent); border-radius: 3px; width: 0%; transition: width 0.4s ease; }
  .upload-status { font-size: 0.75rem; color: var(--text-muted); }
  .template-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 12px; }
  .template-card { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 14px 16px; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; gap: 12px; }
  .template-card:hover { border-color: var(--accent); background: var(--accent-pale); }
  .template-name { font-size: 0.85rem; font-weight: 500; }
  .template-desc { font-size: 0.72rem; color: var(--text-muted); margin-top: 2px; }
  .import-history { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; margin-top: 24px; }
  .import-history-header { padding: 16px 24px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; font-weight: 600; font-size: 0.9rem; }
  .import-row { display: flex; align-items: center; padding: 12px 24px; border-bottom: 1px solid var(--border); gap: 14px; transition: background 0.1s; }
  .import-row:last-child { border-bottom: none; }
  .import-row:hover { background: var(--bg); }
  .import-row-icon { font-size: 15px; width: 32px; height: 32px; background: var(--accent-pale); border-radius: 6px; display: grid; place-items: center; flex-shrink: 0; }
  .import-row-name { font-size: 0.85rem; font-weight: 500; }
  .import-row-meta { font-size: 0.73rem; color: var(--text-muted); margin-top: 1px; }
  .import-ok { background: var(--accent-pale); color: var(--accent); font-size: 0.75rem; font-weight: 500; padding: 3px 10px; border-radius: 20px; margin-left: auto; }
  .import-warn { background: var(--warn-pale); color: var(--warn); font-size: 0.75rem; font-weight: 500; padding: 3px 10px; border-radius: 20px; margin-left: auto; }
</style>
</head>
<body>

<aside class="sidebar">
  <div class="logo">
    <div class="logo-icon">üåø</div>
    <span class="logo-text">Ecotec</span>
  </div>
  <div class="nav-group">
    <div class="nav-label">Overview</div>
    <button class="nav-item active" onclick="setPage(this,'dashboard')"><span class="nav-icon">‚óº</span> Dashboard</button>
    <button class="nav-item" onclick="setPage(this,'analytics')"><span class="nav-icon">‚óà</span> Analytics</button>
    <button class="nav-item" onclick="setPage(this,'reports')"><span class="nav-icon">‚óª</span> Reports</button>
    <button class="nav-item" onclick="setPage(this,'import')"><span class="nav-icon">‚¨Ü</span> Import Data</button>
  </div>
  <div class="nav-group">
    <div class="nav-label">Emissions</div>
    <button class="nav-item" onclick="setPage(this,'sources')"><span class="nav-icon">‚¨°</span> Sources</button>
    <button class="nav-item" onclick="setPage(this,'offsets')"><span class="nav-icon">‚óØ</span> Offsets</button>
    <button class="nav-item" onclick="setPage(this,'goals')"><span class="nav-icon">‚óé</span> Goals</button>
  </div>
  <div class="nav-group">
    <div class="nav-label">Settings</div>
    <button class="nav-item" onclick="setPage(this,'integrations')"><span class="nav-icon">‚¨¶</span> Integrations</button>
    <button class="nav-item" onclick="setPage(this,'team')"><span class="nav-icon">‚óâ</span> Team</button>
  </div>
  <div class="sidebar-footer">
    <div class="user-card" onclick="showToast('Profile settings coming soon')">
      <div class="avatar">AK</div>
      <div style="flex:1;min-width:0">
        <div class="user-name">Alex Kim</div>
        <div class="user-role">Sustainability Lead</div>
      </div>
    </div>
  </div>
</aside>

<main class="main">
  <div class="topbar">
    <div class="page-title" id="pageTitle">Dashboard</div>
    <div class="topbar-actions" id="topbarActions">
      <div class="tabs">
        <button class="tab active" onclick="setTab(this)">Monthly</button>
        <button class="tab" onclick="setTab(this)">Quarterly</button>
        <button class="tab" onclick="setTab(this)">Yearly</button>
      </div>
      <button class="btn btn-outline" onclick="showToast('Report exported as PDF')">‚Üì Export</button>
      <button class="btn btn-primary" onclick="openModal()">+ Log Emission</button>
    </div>
  </div>

  <div class="content">

    <!-- ‚ïê‚ïê‚ïê DASHBOARD ‚ïê‚ïê‚ïê -->
    <div class="page active" id="page-dashboard">
      <div class="alert-banner" id="alertBanner">
        <span style="font-size:16px">‚ö†</span>
        <span class="alert-text"><strong>Action Required:</strong> Scope 3 emissions for Q4 are 12% above target. Review fleet usage data to identify reduction opportunities.</span>
        <button class="btn btn-ghost" style="font-size:0.8rem;padding:4px 10px" onclick="dismissAlert()">Dismiss</button>
      </div>
      <div class="stats-grid">
        <div class="stat-card"><div class="stat-label">Total CO‚ÇÇe (YTD)</div><div class="stat-value">4,821</div><div class="stat-badge badge-down">‚Üì 8.4% vs last year</div><div class="stat-sub">metric tonnes</div></div>
        <div class="stat-card"><div class="stat-label">Scope 1 Direct</div><div class="stat-value">1,203</div><div class="stat-badge badge-down">‚Üì 3.1%</div><div class="stat-sub">on-site combustion</div></div>
        <div class="stat-card"><div class="stat-label">Scope 2 Indirect</div><div class="stat-value">892</div><div class="stat-badge badge-down">‚Üì 14.2%</div><div class="stat-sub">purchased electricity</div></div>
        <div class="stat-card"><div class="stat-label">Scope 3 Value Chain</div><div class="stat-value">2,726</div><div class="stat-badge badge-up">‚Üë 2.8%</div><div class="stat-sub">supply chain &amp; travel</div></div>
      </div>
      <div class="charts-row">
        <div class="card">
          <div class="card-header">
            <div><div class="card-title">Monthly Emissions</div><div class="card-subtitle">CO‚ÇÇe in metric tonnes ¬∑ 2024 vs 2023</div></div>
            <button class="btn btn-ghost" style="font-size:1rem;padding:4px 8px" onclick="showToast('Expanded chart view')">‚§¢</button>
          </div>
          <div class="bar-chart" id="barChart"></div>
          <div class="chart-legend">
            <div class="legend-item"><div class="legend-dot" style="background:var(--accent)"></div>2024</div>
            <div class="legend-item"><div class="legend-dot" style="background:var(--chart-3)"></div>2023</div>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><div><div class="card-title">Emissions by Scope</div><div class="card-subtitle">% of total CO‚ÇÇe</div></div></div>
          <div class="donut-wrap">
            <svg width="140" height="140" viewBox="0 0 140 140" style="margin-bottom:16px">
              <circle cx="70" cy="70" r="52" fill="none" stroke="var(--chart-3)" stroke-width="22" stroke-dasharray="327" stroke-dashoffset="0" transform="rotate(-90 70 70)"/>
              <circle cx="70" cy="70" r="52" fill="none" stroke="var(--chart-2)" stroke-width="22" stroke-dasharray="327" stroke-dashoffset="174" transform="rotate(-90 70 70)"/>
              <circle cx="70" cy="70" r="52" fill="none" stroke="var(--accent)" stroke-width="22" stroke-dasharray="327" stroke-dashoffset="234" transform="rotate(-90 70 70)"/>
              <text x="70" y="66" text-anchor="middle" font-family="DM Serif Display,serif" font-size="18" fill="var(--text)">4,821</text>
              <text x="70" y="82" text-anchor="middle" font-family="DM Sans,sans-serif" font-size="9" fill="var(--text-muted)">tCO‚ÇÇe total</text>
            </svg>
            <div class="scope-list">
              <div class="scope-item"><div class="scope-left"><div class="scope-dot" style="background:var(--accent)"></div><span>Scope 1</span></div><span class="scope-pct">24.9%</span></div>
              <div class="scope-item"><div class="scope-left"><div class="scope-dot" style="background:var(--chart-2)"></div><span>Scope 2</span></div><span class="scope-pct">18.5%</span></div>
              <div class="scope-item"><div class="scope-left"><div class="scope-dot" style="background:var(--chart-3)"></div><span>Scope 3</span></div><span class="scope-pct">56.6%</span></div>
            </div>
          </div>
        </div>
      </div>
      <div class="table-card">
        <div class="table-header">
          <div><div class="card-title">Emission Sources</div><div class="card-subtitle">All tracked sources ¬∑ Feb 2025</div></div>
          <div style="display:flex;gap:10px;align-items:center">
            <div class="search-box"><span>üîç</span><input type="text" placeholder="Search sources..." oninput="filterTable(this.value)"></div>
            <button class="btn btn-outline" onclick="showToast('Filter options opened')">‚öô Filter</button>
          </div>
        </div>
        <table>
          <thead><tr>
            <th onclick="showToast('Sorted by Source')">Source ‚Üï</th>
            <th onclick="showToast('Sorted by Category')">Category ‚Üï</th>
            <th onclick="showToast('Sorted by CO‚ÇÇe')">CO‚ÇÇe (t) ‚Üï</th>
            <th onclick="showToast('Sorted by Change')">vs Last Mo. ‚Üï</th>
            <th>vs Target</th><th>Status</th><th></th>
          </tr></thead>
          <tbody id="emissionsTable">
            <tr><td><strong>Natural Gas</strong></td><td>Scope 1</td><td>487.2</td><td style="color:var(--accent)">‚Üì 4.1%</td><td><div class="progress-bar-wrap"><div class="progress-track"><div class="progress-fill fill-green" style="width:72%"></div></div><span class="progress-pct">72%</span></div></td><td><span class="status-pill status-on-track">‚óè On track</span></td><td><button class="btn btn-ghost" style="padding:4px 10px;font-size:0.8rem" onclick="showToast('Viewing Natural Gas details')">View ‚Üí</button></td></tr>
            <tr><td><strong>Fleet Vehicles</strong></td><td>Scope 1</td><td>316.8</td><td style="color:var(--danger)">‚Üë 7.2%</td><td><div class="progress-bar-wrap"><div class="progress-track"><div class="progress-fill fill-danger" style="width:100%"></div></div><span class="progress-pct" style="color:var(--danger)">112%</span></div></td><td><span class="status-pill status-over">‚óè Over limit</span></td><td><button class="btn btn-ghost" style="padding:4px 10px;font-size:0.8rem" onclick="showToast('Viewing Fleet Vehicles details')">View ‚Üí</button></td></tr>
            <tr><td><strong>Electricity</strong></td><td>Scope 2</td><td>892.1</td><td style="color:var(--accent)">‚Üì 14.2%</td><td><div class="progress-bar-wrap"><div class="progress-track"><div class="progress-fill fill-green" style="width:61%"></div></div><span class="progress-pct">61%</span></div></td><td><span class="status-pill status-on-track">‚óè On track</span></td><td><button class="btn btn-ghost" style="padding:4px 10px;font-size:0.8rem" onclick="showToast('Viewing Electricity details')">View ‚Üí</button></td></tr>
            <tr><td><strong>Business Travel</strong></td><td>Scope 3</td><td>1,024.4</td><td style="color:var(--warn)">‚Üë 2.1%</td><td><div class="progress-bar-wrap"><div class="progress-track"><div class="progress-fill fill-warn" style="width:88%"></div></div><span class="progress-pct">88%</span></div></td><td><span class="status-pill status-at-risk">‚óè At risk</span></td><td><button class="btn btn-ghost" style="padding:4px 10px;font-size:0.8rem" onclick="showToast('Viewing Business Travel details')">View ‚Üí</button></td></tr>
            <tr><td><strong>Supply Chain</strong></td><td>Scope 3</td><td>1,701.5</td><td style="color:var(--danger)">‚Üë 3.4%</td><td><div class="progress-bar-wrap"><div class="progress-track"><div class="progress-fill fill-danger" style="width:100%"></div></div><span class="progress-pct" style="color:var(--danger)">104%</span></div></td><td><span class="status-pill status-over">‚óè Over limit</span></td><td><button class="btn btn-ghost" style="padding:4px 10px;font-size:0.8rem" onclick="showToast('Viewing Supply Chain details')">View ‚Üí</button></td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê ANALYTICS ‚ïê‚ïê‚ïê -->
    <div class="page" id="page-analytics">
      <div class="section-title">Emissions by Plant</div>
      <div class="section-sub">Click any plant card to expand its production lines ¬∑ Feb 2025</div>
      <div class="analytics-summary">
        <div class="stat-card"><div class="stat-label">Active Plants</div><div class="stat-value">4</div><div class="stat-badge badge-down">‚Üì 6.2% overall</div><div class="stat-sub">tracked facilities</div></div>
        <div class="stat-card"><div class="stat-label">Highest Emitter</div><div class="stat-value" style="font-size:1.3rem">Plant A</div><div class="stat-badge badge-up">‚Üë 3.1%</div><div class="stat-sub">Munich ¬∑ 1,842 tCO‚ÇÇe</div></div>
        <div class="stat-card"><div class="stat-label">Best Performer</div><div class="stat-value" style="font-size:1.3rem">Plant D</div><div class="stat-badge badge-down">‚Üì 11.4%</div><div class="stat-sub">Seoul ¬∑ 612 tCO‚ÇÇe</div></div>
      </div>
      <div class="plant-grid">

        <div class="plant-card" id="pA">
          <div class="plant-header" onclick="togglePlant('pA')">
            <div class="plant-meta">
              <div class="plant-icon">üè≠</div>
              <div><div class="plant-name">Plant A ‚Äî Munich</div><div class="plant-loc">Bavaria, Germany ¬∑ 4 production lines</div></div>
            </div>
            <div style="display:flex;align-items:center">
              <div class="plant-total"><div class="plant-co2">1,842 t</div><div class="plant-co2-label">CO‚ÇÇe this month</div></div>
              <span class="plant-expand-icon">‚ñº</span>
            </div>
          </div>
          <div class="plant-lines">
            <div class="plant-lines-header"><span>Line</span><span>CO‚ÇÇe (t)</span><span>vs Last Mo.</span><span>Status</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 1 ‚Äî Casting</div><div class="prod-line-type">Heavy manufacturing</div></div><span class="prod-line-co2">524.1</span><span class="prod-change-up">‚Üë 5.2%</span><span class="status-pill status-at-risk" style="font-size:0.72rem">‚óè At risk</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 2 ‚Äî Assembly</div><div class="prod-line-type">Light assembly</div></div><span class="prod-line-co2">412.8</span><span class="prod-change-down">‚Üì 2.1%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 3 ‚Äî Finishing</div><div class="prod-line-type">Surface treatment</div></div><span class="prod-line-co2">589.0</span><span class="prod-change-up">‚Üë 8.7%</span><span class="status-pill status-over" style="font-size:0.72rem">‚óè Over limit</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 4 ‚Äî Packaging</div><div class="prod-line-type">End of line</div></div><span class="prod-line-co2">316.2</span><span class="prod-change-down">‚Üì 1.4%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
          </div>
        </div>

        <div class="plant-card" id="pB">
          <div class="plant-header" onclick="togglePlant('pB')">
            <div class="plant-meta">
              <div class="plant-icon">üèóÔ∏è</div>
              <div><div class="plant-name">Plant B ‚Äî Lyon</div><div class="plant-loc">Auvergne-Rh√¥ne-Alpes, France ¬∑ 3 lines</div></div>
            </div>
            <div style="display:flex;align-items:center">
              <div class="plant-total"><div class="plant-co2">1,204 t</div><div class="plant-co2-label">CO‚ÇÇe this month</div></div>
              <span class="plant-expand-icon">‚ñº</span>
            </div>
          </div>
          <div class="plant-lines">
            <div class="plant-lines-header"><span>Line</span><span>CO‚ÇÇe (t)</span><span>vs Last Mo.</span><span>Status</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 1 ‚Äî Stamping</div><div class="prod-line-type">Sheet metal</div></div><span class="prod-line-co2">480.3</span><span class="prod-change-down">‚Üì 4.8%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 2 ‚Äî Welding</div><div class="prod-line-type">Robotic welding</div></div><span class="prod-line-co2">391.5</span><span class="prod-change-down">‚Üì 7.2%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 3 ‚Äî Paint Shop</div><div class="prod-line-type">Coating &amp; curing</div></div><span class="prod-line-co2">332.2</span><span class="prod-change-up">‚Üë 1.1%</span><span class="status-pill status-at-risk" style="font-size:0.72rem">‚óè At risk</span></div>
          </div>
        </div>

        <div class="plant-card" id="pC">
          <div class="plant-header" onclick="togglePlant('pC')">
            <div class="plant-meta">
              <div class="plant-icon">‚öôÔ∏è</div>
              <div><div class="plant-name">Plant C ‚Äî Detroit</div><div class="plant-loc">Michigan, United States ¬∑ 5 lines</div></div>
            </div>
            <div style="display:flex;align-items:center">
              <div class="plant-total"><div class="plant-co2">1,163 t</div><div class="plant-co2-label">CO‚ÇÇe this month</div></div>
              <span class="plant-expand-icon">‚ñº</span>
            </div>
          </div>
          <div class="plant-lines">
            <div class="plant-lines-header"><span>Line</span><span>CO‚ÇÇe (t)</span><span>vs Last Mo.</span><span>Status</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 1 ‚Äî Forging</div><div class="prod-line-type">Metal forming</div></div><span class="prod-line-co2">298.1</span><span class="prod-change-down">‚Üì 3.3%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 2 ‚Äî Machining</div><div class="prod-line-type">CNC operations</div></div><span class="prod-line-co2">241.0</span><span class="prod-change-down">‚Üì 1.9%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 3 ‚Äî Heat Treat</div><div class="prod-line-type">Thermal processing</div></div><span class="prod-line-co2">312.4</span><span class="prod-change-up">‚Üë 9.1%</span><span class="status-pill status-over" style="font-size:0.72rem">‚óè Over limit</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 4 ‚Äî QC &amp; Test</div><div class="prod-line-type">Quality control</div></div><span class="prod-line-co2">187.6</span><span class="prod-change-down">‚Üì 5.5%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 5 ‚Äî Dispatch</div><div class="prod-line-type">Logistics</div></div><span class="prod-line-co2">123.9</span><span class="prod-change-down">‚Üì 2.0%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
          </div>
        </div>

        <div class="plant-card" id="pD">
          <div class="plant-header" onclick="togglePlant('pD')">
            <div class="plant-meta">
              <div class="plant-icon">üîã</div>
              <div><div class="plant-name">Plant D ‚Äî Seoul</div><div class="plant-loc">Gyeonggi-do, South Korea ¬∑ 2 lines</div></div>
            </div>
            <div style="display:flex;align-items:center">
              <div class="plant-total"><div class="plant-co2">612 t</div><div class="plant-co2-label">CO‚ÇÇe this month</div></div>
              <span class="plant-expand-icon">‚ñº</span>
            </div>
          </div>
          <div class="plant-lines">
            <div class="plant-lines-header"><span>Line</span><span>CO‚ÇÇe (t)</span><span>vs Last Mo.</span><span>Status</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 1 ‚Äî Battery Cell</div><div class="prod-line-type">Electrochemical</div></div><span class="prod-line-co2">390.2</span><span class="prod-change-down">‚Üì 12.3%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
            <div class="prod-line"><div><div class="prod-line-name">Line 2 ‚Äî Pack Assembly</div><div class="prod-line-type">Module integration</div></div><span class="prod-line-co2">221.8</span><span class="prod-change-down">‚Üì 10.1%</span><span class="status-pill status-on-track" style="font-size:0.72rem">‚óè On track</span></div>
          </div>
        </div>

      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê REPORTS ‚ïê‚ïê‚ïê -->
    <div class="page" id="page-reports">
      <div class="section-title">Report Generator</div>
      <div class="section-sub">Select a report type, configure the period, then generate.</div>

      <div class="report-builder">
        <div style="font-weight:600;font-size:0.88rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.06em;margin-bottom:12px">1 ¬∑ Report Type</div>
        <div class="report-type-grid">
          <div class="report-type-card selected" id="rtype-monthly" onclick="selectReportType('monthly')">
            <div class="report-type-icon">üìÖ</div>
            <div class="report-type-name">Monthly</div>
            <div class="report-type-desc">Single month breakdown</div>
          </div>
          <div class="report-type-card" id="rtype-quarterly" onclick="selectReportType('quarterly')">
            <div class="report-type-icon">üìä</div>
            <div class="report-type-name">Quarterly</div>
            <div class="report-type-desc">Q1 ‚Äì Q4 summary</div>
          </div>
          <div class="report-type-card" id="rtype-yearly" onclick="selectReportType('yearly')">
            <div class="report-type-icon">üìà</div>
            <div class="report-type-name">Yearly</div>
            <div class="report-type-desc">Full annual report</div>
          </div>
        </div>

        <div style="font-weight:600;font-size:0.88rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.06em;margin-bottom:12px">2 ¬∑ Period</div>

        <div id="params-monthly" class="form-row" style="margin-bottom:20px">
          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">Month</label>
            <select class="form-input" id="sel-month">
              <option>January</option><option>February</option><option>March</option><option>April</option>
              <option>May</option><option>June</option><option>July</option><option>August</option>
              <option>September</option><option>October</option><option>November</option><option selected>December</option>
            </select>
          </div>
          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">Year</label>
            <select class="form-input" id="sel-month-year">
              <option>2022</option><option>2023</option><option selected>2024</option><option>2025</option>
            </select>
          </div>
        </div>

        <div id="params-quarterly" class="form-row" style="display:none;margin-bottom:20px">
          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">Quarter</label>
            <select class="form-input" id="sel-quarter">
              <option>Q1 (Jan ‚Äì Mar)</option><option>Q2 (Apr ‚Äì Jun)</option>
              <option>Q3 (Jul ‚Äì Sep)</option><option selected>Q4 (Oct ‚Äì Dec)</option>
            </select>
          </div>
          <div class="form-group" style="margin-bottom:0">
            <label class="form-label">Year</label>
            <select class="form-input" id="sel-quarter-year">
              <option>2022</option><option>2023</option><option selected>2024</option><option>2025</option>
            </select>
          </div>
        </div>

        <div id="params-yearly" style="display:none;margin-bottom:20px">
          <div class="form-group" style="margin-bottom:0;max-width:200px">
            <label class="form-label">Year</label>
            <select class="form-input" id="sel-year">
              <option>2022</option><option>2023</option><option selected>2024</option><option>2025</option>
            </select>
          </div>
        </div>

        <div style="font-weight:600;font-size:0.88rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.06em;margin-bottom:12px">3 ¬∑ Sections to Include</div>
        <div style="display:flex;gap:14px;flex-wrap:wrap;margin-bottom:28px">
          <label style="display:flex;align-items:center;gap:6px;font-size:0.85rem;cursor:pointer"><input type="checkbox" checked style="accent-color:var(--accent)"> Scope 1 &amp; 2</label>
          <label style="display:flex;align-items:center;gap:6px;font-size:0.85rem;cursor:pointer"><input type="checkbox" checked style="accent-color:var(--accent)"> Scope 3</label>
          <label style="display:flex;align-items:center;gap:6px;font-size:0.85rem;cursor:pointer"><input type="checkbox" checked style="accent-color:var(--accent)"> Plant breakdown</label>
          <label style="display:flex;align-items:center;gap:6px;font-size:0.85rem;cursor:pointer"><input type="checkbox" style="accent-color:var(--accent)"> Executive summary</label>
          <label style="display:flex;align-items:center;gap:6px;font-size:0.85rem;cursor:pointer"><input type="checkbox" style="accent-color:var(--accent)"> Offset credits</label>
          <label style="display:flex;align-items:center;gap:6px;font-size:0.85rem;cursor:pointer"><input type="checkbox" style="accent-color:var(--accent)"> Target vs actual</label>
        </div>

        <div style="display:flex;align-items:center;gap:14px">
          <button class="btn btn-primary btn-lg" onclick="generateReport()">‚ö° Generate Report</button>
          <span style="font-size:0.78rem;color:var(--text-muted)">Outputs PDF &amp; CSV</span>
        </div>
      </div>

      <div class="report-history">
        <div class="report-history-header">Recent Reports</div>
        <div class="report-row"><div class="report-row-icon">üìã</div><div><div class="report-row-name">Q4 2024 Quarterly Report</div><div class="report-row-meta">Generated Feb 3, 2025 ¬∑ All plants ¬∑ 3 scopes</div></div><span class="report-row-size">2.4 MB</span><button class="btn btn-outline" style="padding:5px 14px;font-size:0.8rem" onclick="showToast('Downloading Q4 2024 report‚Ä¶')">‚Üì Download</button></div>
        <div class="report-row"><div class="report-row-icon">üìã</div><div><div class="report-row-name">Full Year 2024 Annual Report</div><div class="report-row-meta">Generated Jan 15, 2025 ¬∑ All plants ¬∑ Executive summary</div></div><span class="report-row-size">8.1 MB</span><button class="btn btn-outline" style="padding:5px 14px;font-size:0.8rem" onclick="showToast('Downloading 2024 Annual report‚Ä¶')">‚Üì Download</button></div>
        <div class="report-row"><div class="report-row-icon">üìã</div><div><div class="report-row-name">November 2024 Monthly Report</div><div class="report-row-meta">Generated Dec 5, 2024 ¬∑ Plant A, B, C, D</div></div><span class="report-row-size">1.8 MB</span><button class="btn btn-outline" style="padding:5px 14px;font-size:0.8rem" onclick="showToast('Downloading November 2024 report‚Ä¶')">‚Üì Download</button></div>
        <div class="report-row"><div class="report-row-icon">üìã</div><div><div class="report-row-name">Q3 2024 Quarterly Report</div><div class="report-row-meta">Generated Oct 8, 2024 ¬∑ All plants</div></div><span class="report-row-size">2.2 MB</span><button class="btn btn-outline" style="padding:5px 14px;font-size:0.8rem" onclick="showToast('Downloading Q3 2024 report‚Ä¶')">‚Üì Download</button></div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê IMPORT DATA ‚ïê‚ïê‚ïê -->
    <div class="page" id="page-import">
      <div class="section-title">Import Emission Data</div>
      <div class="section-sub">Upload files, connect data sources, or download a template to get started.</div>

      <div class="import-grid">
        <div>
          <div class="drop-zone" id="dropZone"
            ondragover="event.preventDefault();this.classList.add('dragover')"
            ondragleave="this.classList.remove('dragover')"
            ondrop="handleFileDrop(event)"
            onclick="document.getElementById('fileInput').click()">
            <div class="drop-zone-icon">üìÇ</div>
            <div class="drop-zone-title">Drop files here or click to upload</div>
            <div class="drop-zone-sub">Supports spreadsheets, CSV exports, and structured data files</div>
            <div class="drop-zone-formats">
              <span class="format-tag">.xlsx</span><span class="format-tag">.csv</span>
              <span class="format-tag">.json</span><span class="format-tag">.xml</span>
            </div>
          </div>
          <input type="file" id="fileInput" style="display:none" accept=".csv,.xlsx,.json,.xml" onchange="handleFileSelect(this)">
          <div class="upload-progress" id="uploadProgress">
            <div class="upload-progress-label">
              <span id="uploadFileName">file.csv</span>
              <span id="uploadPct">0%</span>
            </div>
            <div class="upload-bar-track"><div class="upload-bar-fill" id="uploadBar"></div></div>
            <div class="upload-status" id="uploadStatus">Validating file structure‚Ä¶</div>
          </div>
        </div>

        <div class="import-side">
          <div class="import-side-label">Connect a Data Source</div>
          <div class="import-option" onclick="showToast('Connecting to ERP system‚Ä¶')"><div class="import-option-icon">üè¢</div><div><div class="import-option-name">ERP System</div><div class="import-option-desc">SAP, Oracle, Microsoft Dynamics</div></div><span class="import-arrow">‚Üí</span></div>
          <div class="import-option" onclick="showToast('Opening utility provider connection‚Ä¶')"><div class="import-option-icon">‚ö°</div><div><div class="import-option-name">Utility Provider</div><div class="import-option-desc">Electricity &amp; gas meter data</div></div><span class="import-arrow">‚Üí</span></div>
          <div class="import-option" onclick="showToast('Opening fleet telematics connection‚Ä¶')"><div class="import-option-icon">üöõ</div><div><div class="import-option-name">Fleet Telematics</div><div class="import-option-desc">GPS &amp; fuel consumption logs</div></div><span class="import-arrow">‚Üí</span></div>
          <div class="import-option" onclick="showToast('Opening travel booking connection‚Ä¶')"><div class="import-option-icon">‚úàÔ∏è</div><div><div class="import-option-name">Travel &amp; Expenses</div><div class="import-option-desc">Concur, Egencia, Navan</div></div><span class="import-arrow">‚Üí</span></div>
        </div>
      </div>

      <div style="font-weight:600;font-size:0.9rem;margin-bottom:4px">Download Import Templates</div>
      <div style="font-size:0.78rem;color:var(--text-muted);margin-bottom:12px">Pre-formatted spreadsheets ready for your data</div>
      <div class="template-grid">
        <div class="template-card" onclick="showToast('Downloading Scope 1 template‚Ä¶')"><span style="font-size:18px">üìÑ</span><div><div class="template-name">Scope 1 ‚Äî Direct</div><div class="template-desc">Fuel, combustion, processes</div></div></div>
        <div class="template-card" onclick="showToast('Downloading Scope 2 template‚Ä¶')"><span style="font-size:18px">üìÑ</span><div><div class="template-name">Scope 2 ‚Äî Electricity</div><div class="template-desc">Grid, renewables, heat</div></div></div>
        <div class="template-card" onclick="showToast('Downloading Scope 3 template‚Ä¶')"><span style="font-size:18px">üìÑ</span><div><div class="template-name">Scope 3 ‚Äî Value Chain</div><div class="template-desc">Travel, freight, supply chain</div></div></div>
        <div class="template-card" onclick="showToast('Downloading Plant Data template‚Ä¶')"><span style="font-size:18px">üìÑ</span><div><div class="template-name">Plant &amp; Production Lines</div><div class="template-desc">Facility-level breakdown</div></div></div>
        <div class="template-card" onclick="showToast('Downloading Fleet Log template‚Ä¶')"><span style="font-size:18px">üìÑ</span><div><div class="template-name">Fleet &amp; Vehicle Log</div><div class="template-desc">Mileage, fuel type, trips</div></div></div>
        <div class="template-card" onclick="showToast('Downloading full GHG template‚Ä¶')"><span style="font-size:18px">üì¶</span><div><div class="template-name">Full GHG Inventory</div><div class="template-desc">All scopes combined</div></div></div>
      </div>

      <div class="import-history">
        <div class="import-history-header">
          <span>Recent Imports</span>
          <button class="btn btn-ghost" style="font-size:0.8rem;padding:4px 10px" onclick="showToast('Viewing full import log')">View all ‚Üí</button>
        </div>
        <div class="import-row"><div class="import-row-icon">üìä</div><div><div class="import-row-name">scope1_q4_2024.xlsx</div><div class="import-row-meta">Feb 3, 2025 ¬∑ 1,204 rows ¬∑ Plant A, B, C, D</div></div><span class="import-ok">‚úì Imported</span></div>
        <div class="import-row"><div class="import-row-icon">üìä</div><div><div class="import-row-name">fleet_november_2024.csv</div><div class="import-row-meta">Dec 5, 2024 ¬∑ 342 rows ¬∑ Fleet Vehicles</div></div><span class="import-ok">‚úì Imported</span></div>
        <div class="import-row"><div class="import-row-icon">üìä</div><div><div class="import-row-name">supply_chain_q3.csv</div><div class="import-row-meta">Oct 9, 2024 ¬∑ 88 rows ¬∑ 3 warnings found</div></div><span class="import-warn">‚ö† 3 warnings</span></div>
        <div class="import-row"><div class="import-row-icon">üìä</div><div><div class="import-row-name">electricity_annual_2024.xlsx</div><div class="import-row-meta">Jan 14, 2025 ¬∑ 2,810 rows ¬∑ Scope 2</div></div><span class="import-ok">‚úì Imported</span></div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê PLACEHOLDERS ‚ïê‚ïê‚ïê -->
    <div class="page" id="page-sources"><div style="padding:60px 0;text-align:center;color:var(--text-muted)"><div style="font-size:2.5rem;margin-bottom:14px">‚¨°</div><div style="font-family:'DM Serif Display',serif;font-size:1.4rem;color:var(--text)">Sources</div><div style="margin-top:8px;font-size:0.88rem">Manage your tracked emission sources here.</div></div></div>
    <div class="page" id="page-offsets"><div style="padding:60px 0;text-align:center;color:var(--text-muted)"><div style="font-size:2.5rem;margin-bottom:14px">‚óØ</div><div style="font-family:'DM Serif Display',serif;font-size:1.4rem;color:var(--text)">Offsets</div><div style="margin-top:8px;font-size:0.88rem">Track carbon offset credits and projects.</div></div></div>
    <div class="page" id="page-goals"><div style="padding:60px 0;text-align:center;color:var(--text-muted)"><div style="font-size:2.5rem;margin-bottom:14px">‚óé</div><div style="font-family:'DM Serif Display',serif;font-size:1.4rem;color:var(--text)">Goals</div><div style="margin-top:8px;font-size:0.88rem">Set and track reduction targets.</div></div></div>
    <div class="page" id="page-integrations"><div style="padding:60px 0;text-align:center;color:var(--text-muted)"><div style="font-size:2.5rem;margin-bottom:14px">‚¨¶</div><div style="font-family:'DM Serif Display',serif;font-size:1.4rem;color:var(--text)">Integrations</div><div style="margin-top:8px;font-size:0.88rem">Connect third-party tools and data sources.</div></div></div>
    <div class="page" id="page-team"><div style="padding:60px 0;text-align:center;color:var(--text-muted)"><div style="font-size:2.5rem;margin-bottom:14px">‚óâ</div><div style="font-family:'DM Serif Display',serif;font-size:1.4rem;color:var(--text)">Team</div><div style="margin-top:8px;font-size:0.88rem">Manage team members and permissions.</div></div></div>

  </div>
</main>

<!-- LOG EMISSION MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModalOnOverlay(event)">
  <div class="modal">
    <div class="modal-title">Log New Emission</div>
    <div class="modal-sub">Add an emission record to your tracking dashboard.</div>
    <div class="form-row">
      <div class="form-group"><label class="form-label">Source Name</label><input class="form-input" type="text" placeholder="e.g. Company van #4"></div>
      <div class="form-group"><label class="form-label">Scope</label><select class="form-input"><option>Scope 1 ‚Äî Direct</option><option>Scope 2 ‚Äî Indirect</option><option>Scope 3 ‚Äî Value Chain</option></select></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label class="form-label">CO‚ÇÇe Amount (tonnes)</label><input class="form-input" type="number" placeholder="0.00"></div>
      <div class="form-group"><label class="form-label">Date</label><input class="form-input" type="date" value="2025-02-26"></div>
    </div>
    <div class="form-group"><label class="form-label">Category</label><select class="form-input"><option>Combustion / Fuel</option><option>Fleet Vehicles</option><option>Electricity / Energy</option><option>Business Travel</option><option>Supply Chain</option><option>Waste &amp; Water</option><option>Other</option></select></div>
    <div class="form-group"><label class="form-label">Notes (optional)</label><input class="form-input" type="text" placeholder="Any additional context‚Ä¶"></div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal()">Cancel</button>
      <button class="btn btn-primary" onclick="submitEmission()">Save Emission</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"><span id="toastText"></span></div>

<script>
  // ‚îÄ‚îÄ BAR CHART ‚îÄ‚îÄ
  const months = ['Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','Jan','Feb'];
  const data2024 = [410,395,380,365,345,330,355,375,390,415,400,380];
  const data2023 = [450,440,425,410,400,390,405,420,430,460,445,430];
  const maxVal = Math.max(...data2024,...data2023);
  const chart = document.getElementById('barChart');
  months.forEach((m,i) => {
    const h24 = Math.round((data2024[i]/maxVal)*140);
    const h23 = Math.round((data2023[i]/maxVal)*140);
    chart.innerHTML += `<div class="bar-col">
      <div class="bar-tooltip">${m}: ${data2024[i]}t CO‚ÇÇe</div>
      <div style="display:flex;gap:2px;align-items:flex-end;height:140px;">
        <div class="bar bar-main" style="height:${h24}px;width:12px"></div>
        <div class="bar bar-prev" style="height:${h23}px;width:12px"></div>
      </div>
      <span class="bar-label">${m}</span>
    </div>`;
  });

  // ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
  let toastTimer;
  function showToast(msg) {
    const t = document.getElementById('toast');
    document.getElementById('toastText').textContent = msg;
    t.classList.add('show');
    clearTimeout(toastTimer);
    toastTimer = setTimeout(() => t.classList.remove('show'), 2600);
  }

  // ‚îÄ‚îÄ ALERT ‚îÄ‚îÄ
  function dismissAlert() {
    document.getElementById('alertBanner').classList.add('hidden');
    showToast('Alert dismissed');
  }

  // ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ
  function openModal() { document.getElementById('modalOverlay').classList.add('open'); }
  function closeModal() { document.getElementById('modalOverlay').classList.remove('open'); }
  function closeModalOnOverlay(e) { if (e.target === document.getElementById('modalOverlay')) closeModal(); }
  function submitEmission() { closeModal(); showToast('‚úì Emission logged successfully'); }

  // ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ
  const dashboardTopbar = document.getElementById('topbarActions').innerHTML;
  function setPage(el, page) {
    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
    el.classList.add('active');
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    const target = document.getElementById('page-' + page);
    if (target) target.classList.add('active');
    document.getElementById('pageTitle').textContent = el.textContent.trim().replace(/^\S+\s*/,'');
    const actions = document.getElementById('topbarActions');
    if (page === 'dashboard') {
      actions.innerHTML = dashboardTopbar;
    } else if (page === 'analytics') {
      actions.innerHTML = `<button class="btn btn-outline" onclick="showToast('Plant breakdown exported')">‚Üì Export</button><button class="btn btn-primary" onclick="showToast('Add plant ‚Äî coming soon')">+ Add Plant</button>`;
    } else if (page === 'reports') {
      actions.innerHTML = `<button class="btn btn-ghost" onclick="showToast('Report settings')">‚öô Settings</button>`;
    } else if (page === 'import') {
      actions.innerHTML = `<button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">‚Üë Upload File</button>`;
    } else {
      actions.innerHTML = '';
    }
  }

  // ‚îÄ‚îÄ DASHBOARD TABS ‚îÄ‚îÄ
  function setTab(el) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    el.classList.add('active');
    showToast(`Switched to ${el.textContent} view`);
  }

  // ‚îÄ‚îÄ TABLE FILTER ‚îÄ‚îÄ
  function filterTable(q) {
    document.querySelectorAll('#emissionsTable tr').forEach(r => {
      r.style.display = r.textContent.toLowerCase().includes(q.toLowerCase()) ? '' : 'none';
    });
  }

  // ‚îÄ‚îÄ ANALYTICS: PLANT EXPAND ‚îÄ‚îÄ
  function togglePlant(id) {
    document.getElementById(id).classList.toggle('expanded');
  }

  // ‚îÄ‚îÄ REPORTS: TYPE SELECTOR ‚îÄ‚îÄ
  function selectReportType(type) {
    ['monthly','quarterly','yearly'].forEach(t => {
      document.getElementById('rtype-'+t).classList.remove('selected');
      document.getElementById('params-'+t).style.display = 'none';
    });
    document.getElementById('rtype-'+type).classList.add('selected');
    const el = document.getElementById('params-'+type);
    el.style.display = (type === 'yearly') ? 'block' : 'grid';
  }

  function generateReport() {
    const typeName = document.querySelector('.report-type-card.selected .report-type-name').textContent;
    let period = '';
    if (typeName === 'Monthly') period = document.getElementById('sel-month').value + ' ' + document.getElementById('sel-month-year').value;
    else if (typeName === 'Quarterly') period = document.getElementById('sel-quarter').value + ' ' + document.getElementById('sel-quarter-year').value;
    else period = document.getElementById('sel-year').value;
    showToast(`‚ö° Generating ${typeName} report for ${period}‚Ä¶`);
    setTimeout(() => showToast(`‚úì ${typeName} Report ‚Äî ${period} is ready`), 2800);
  }

  // ‚îÄ‚îÄ IMPORT: FILE UPLOAD ‚îÄ‚îÄ
  function handleFileDrop(e) {
    e.preventDefault();
    document.getElementById('dropZone').classList.remove('dragover');
    const file = e.dataTransfer.files[0];
    if (file) startUpload(file.name);
  }
  function handleFileSelect(input) {
    if (input.files[0]) startUpload(input.files[0].name);
  }
  function startUpload(name) {
    const prog = document.getElementById('uploadProgress');
    const bar = document.getElementById('uploadBar');
    const pctEl = document.getElementById('uploadPct');
    const statusEl = document.getElementById('uploadStatus');
    document.getElementById('uploadFileName').textContent = name;
    prog.classList.add('visible');
    bar.style.width = '0%';
    const steps = [[20,'Parsing rows‚Ä¶'],[50,'Mapping emission factors‚Ä¶'],[75,'Running validation checks‚Ä¶'],[95,'Finalizing import‚Ä¶'],[100,'‚úì Import complete']];
    let si = 0;
    const iv = setInterval(() => {
      if (si < steps.length) {
        bar.style.width = steps[si][0] + '%';
        pctEl.textContent = steps[si][0] + '%';
        statusEl.textContent = steps[si][1];
        si++;
      } else {
        clearInterval(iv);
        showToast(`‚úì ${name} imported successfully`);
      }
    }, 500);
  }
</script>
</body>
</html>
